---
title: "Exercises for the meeting of April 29, 2019"
author: "Violeta Sosa"
date: "April 27, 2019"
output:
  html_document:
    toc: true
    toc_float: true
    theme: simplex
    highlight: tango
---

<style>
body {
text-align: justify}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Exercises for the meeting of 29 April, 2019

The reading material for this exercise the same as for the previous (the second part of ”Introduction to R” (ch 7-12), found from the R home page or https://cran.r-project.org/doc/manuals/r-release/R-intro.html) 

The exercise will be discussed on Mon, Apr 29.

##Exercise 1
Read the help page of `?formula, ?model.frame`, and `?model.matrix`

```{r help}
#?formula
#?model.frame
#?model.matrix
```
##Exercise 2
Create a formula, e.g. by `f <- y ~ x` after creating this what does this object mean, or do? Does object `f` exist? Do `x` and `y` exist?

```{r formula}
as.formula(f <- y ~ x)
class(f)
f
#Calling variable x and y will generate an error in the code because it does not exist in the environment yet.
#x
#y
```
_The code `f <- y ~ x` defines an unevaluated expression. `f` exists as storage for the definition of the arguments `x` as the dependent variable and `y` as an independent variable, but without making use of them. Consequently, `x` and `y` does not exist yet in the working environment._

##Exercise 3
Create `x` and `y`, e.g. `x <- 1:10` and `y <- 10:1`, and evaluate `model.frame(f)` and `model.frame(f, data.frame(x=x,y=y)[1:3,])`, and explain where `x` and `y` are taken from.

```{r}
x <- 1:10
y<-10:1
model.frame(f)
model.frame(f, data.frame(x=x,y=y)[1:3,])
```
_`model.frame(f)` shows the arguments defined for the formula `f` and `x`and `y` are taken from the list definition `x <- 1:10` and `y <- 10:1` respectively that currently exists as variables in the Global Environment. For `model.frame(f, data.frame(x=x,y=y)[1:3,])`, `x` and `y` are a cloned/overwritten version of the original objects limited by the first 3 rows. _

##Exercise 4
Expressions in formula’s: explain the difference you see from `model.frame(y~x+1)` and `model.frame(y~I(x+1))`

```{r}
model.frame(y~x+1)
model.frame(y~I(x+1))
```
_For `model.frame(y~x+1)` , the function will return the data frame with the formula definition with `y` as the independent variable and `x+1` as dependent variables. The symbol `+` is used to separate the terms and do their inclusion in the model. In `model.frame(y~I(x+1))`, The use of function `I()` will allow the use of the operator `+` as an arithmetic operator. Consequently, it will perform a  sum of terms. This behavior comes from the Wilkinson-Rogers (1973) Notation_

##Exercise 5
Factors in formula’s. Define a factor, `f <- factor(c(rep("a",3)`, `rep("b", 3)`,`rep("c", 4)))`. Explain how it will work in a linear model, say `lm(y ~ x + f)`

```{r}
f <- factor(c(rep("a",3), rep("b", 3),rep("c", 4)))
f
lm(y ~ x + f)
```
_In `lm(y ~ x + f)`, `f` is an inclusion variable in the model. It will work as a **simple factorial model formulae (Wilkinson-Rogers, 1973)**. The observations `y` will appear indexed by the factors in `f` with levels specified in `f` previously (this can check by the value of `f`)._

##Exercise 6
Model.matrix: explain the difference between `model.frame(y~x+f)` and `model.matrix(y~x+f)`


```{r}
model.frame(y~x+f)
```
_The function `model.frame(y~x+f)` is used to return the model **data.frame** from the fitted object without additional arguments, the result is an object with the outcome covariates, in this case, `f` factor levels against values in `y` and `x` respectively._ 

```{r}
model.matrix(y~x+f)
```
_On the other hand, `model.matrix(y~x+f)` returns a matrix with already computed values for the model. In this case, the intercepts. The factor levels 'a,b,c' has been converted into numeric indicators. As a general rule from L levels the `model.matrix()` will generated `L-1` indicator variables as dummy variables. Using the function `model.matrix` is useful to get the least squares estimates in order to fit the model._

_This is helpful in linear model design to identify the exploratory variables and allocate, for example, the control groups in the data analysis by making use of factors as a binary combination._
